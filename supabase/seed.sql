-- ============================================
-- SEED DATA: 关雅荻媒体从业路径 (Demo)
-- ============================================
-- NOTE: 因为 users 表关联 auth.users，seed 时需要先有一个真实用户。
-- 这里用一个占位 UUID，实际使用时替换为真实 auth user id。
-- 或者你可以先注册一个测试账号，拿到 user id 后替换。

-- Step 1: Insert a test user (replace UUID with your real auth user id)
INSERT INTO public.users (id, email, display_name)
VALUES (
  '00000000-0000-0000-0000-000000000001',
  'demo@pathapp.dev',
  '关雅荻'
) ON CONFLICT (id) DO NOTHING;

-- Step 2: Insert report
INSERT INTO public.reports (id, user_id, title, description, generated_by_ai, components)
VALUES (
  '10000000-0000-0000-0000-000000000001',
  '00000000-0000-0000-0000-000000000001',
  '关雅荻媒体从业路径',
  '从传统媒体到自媒体创业的完整职业路径分析',
  TRUE,
  '[
    {"type": "timeline", "title": "职业时间线", "enabled": true},
    {"type": "funnel", "title": "影响力漏斗", "enabled": true},
    {"type": "revenue_tree", "title": "收入结构树", "enabled": true},
    {"type": "product_matrix", "title": "产品矩阵", "enabled": true}
  ]'::jsonb
);

-- Step 3: Timeline stages
INSERT INTO public.timeline_stages (report_id, title, description, start_date, end_date, order_index) VALUES
('10000000-0000-0000-0000-000000000001', '传统媒体时期', '在传统媒体机构从事内容生产与编辑工作', '2005', '2012', 0),
('10000000-0000-0000-0000-000000000001', '新媒体转型期', '从传统媒体向新媒体平台转型，开始探索自媒体', '2012', '2016', 1),
('10000000-0000-0000-0000-000000000001', '自媒体创业期', '全面投入自媒体运营，建立个人品牌', '2016', '2020', 2),
('10000000-0000-0000-0000-000000000001', '商业化成熟期', '多元化收入结构成型，产品矩阵完善', '2020', '2025', 3);

-- Step 4: Funnel layers
INSERT INTO public.funnel_layers (report_id, label, value, description, layer_order) VALUES
('10000000-0000-0000-0000-000000000001', '公域流量曝光', 5000000, '全平台内容触达用户数', 0),
('10000000-0000-0000-0000-000000000001', '内容消费用户', 800000, '深度阅读/观看完成的用户', 1),
('10000000-0000-0000-0000-000000000001', '关注/订阅用户', 200000, '各平台粉丝总量', 2),
('10000000-0000-0000-0000-000000000001', '社群活跃用户', 15000, '付费社群与核心粉丝群', 3),
('10000000-0000-0000-0000-000000000001', '付费客户', 3000, '购买过产品/服务的用户', 4);

-- Step 5: Revenue tree nodes
-- Root node
INSERT INTO public.revenue_nodes (id, report_id, parent_id, label, amount, description) VALUES
('20000000-0000-0000-0000-000000000001', '10000000-0000-0000-0000-000000000001', NULL, '总收入', 2000000, '年度总收入');

-- Level 1
INSERT INTO public.revenue_nodes (id, report_id, parent_id, label, amount, description) VALUES
('20000000-0000-0000-0000-000000000010', '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000001', '内容收入', 600000, '平台分成与稿费'),
('20000000-0000-0000-0000-000000000020', '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000001', '商业合作', 800000, '品牌广告与商务合作'),
('20000000-0000-0000-0000-000000000030', '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000001', '知识付费', 400000, '课程与付费社群'),
('20000000-0000-0000-0000-000000000040', '10000000-0000-0000-0000-000000000001', '20000000-0000-0000-0000-000000000001', '咨询服务', 200000, '一对一咨询与企业顾问');

-- Step 6: Product matrix items
INSERT INTO public.product_matrix_items (report_id, name, category, audience, price_range, description) VALUES
('10000000-0000-0000-0000-000000000001', '公众号深度文章', '免费内容', '大众读者', '免费', '每周2-3篇深度行业分析文章'),
('10000000-0000-0000-0000-000000000001', '媒体人转型课', '线上课程', '媒体从业者', '299-699', '系统化的媒体人转型方法论课程'),
('10000000-0000-0000-0000-000000000001', '行业闭门社群', '付费社群', '资深从业者', '1999/年', '限定人数的高质量行业交流社群'),
('10000000-0000-0000-0000-000000000001', '企业内容顾问', '咨询服务', '企业客户', '5万-20万/项目', '为企业提供内容战略咨询'),
('10000000-0000-0000-0000-000000000001', '品牌联名内容', '商业合作', '品牌方', '3万-10万/篇', '与品牌合作的定制内容');

-- ============================================
-- SEED COMPLETE
-- ============================================
